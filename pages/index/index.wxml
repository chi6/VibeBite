<!--index.wxml-->
<view class="container">
  <!-- 主要内容区域 -->
  <view class="main-content">
    <!-- AI状态卡片 -->
    <view class="card ai-status-card">
      <view class="ai-header">
        <image class="ai-animation" src="/images/dog.gif" mode="aspectFit"></image>
        <view class="ai-title">
          <text class="title">{{aiStatus.name}}</text>
          <text class="subtitle">让美食推荐更懂你的心</text>
        </view>
      </view>
      <view class="status-tags">
        <text class="status-tag">心情: {{aiStatus.mood}}</text>
        <text class="status-tag">活跃度: {{aiStatus.activity}}</text>
      </view>
      <text class="ai-thought">{{aiStatus.thought}}</text>
    </view>

    <!-- 餐饮喜好卡片 -->
    <view class="card preferences-card">
      <view class="card-header">
        <text class="card-title">个性化推荐</text>
        <text class="card-subtitle">基于你的饮食偏好</text>
      </view>
      
      <view class="preferences-content">
        <view class="recommendations-list">
          <view class="recommendation-category" 
                wx:for="{{preferences.recommendations}}" 
                wx:key="type">
            <view class="category-header">
              <view class="category-icon">{{item.icon}}</view>
              <text class="category-title">{{item.type}}</text>
            </view>
            
            <view class="recommendation-items">
              <view class="recommendation-item" 
                    wx:for="{{item.items}}" 
                    wx:key="description" 
                    wx:for-item="subItem">
                <view class="item-content">
                  <text class="rich-content">{{subItem.description}}</text>
                  <view class="highlight-tags" wx:if="{{subItem.highlights.length > 0}}">
                    <text class="highlight-tag" 
                          wx:for="{{subItem.highlights}}" 
                          wx:key="*this" 
                          wx:for-item="tag">{{tag}}</text>
                  </view>
                </view>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- 快捷对话入口 -->
    <button class="chat-btn gradient-bg" bindtap="goToAIChat">
      <view class="chat-btn-content">
        <image class="ai-icon" src="/images/ai-icon.png" mode="aspectFit"></image>
        <view class="btn-text">
          <text class="btn-title">与AI助手对话</text>
          <text class="btn-desc">让AI为您推荐美食</text>
        </view>
      </view>
    </button>
  </view>
</view>

